# Haxall https://github.com/haxall/haxall
# Create a clean Ubuntu container with Haxall
# Author: Chris Weyandt (cweyandt@lbl.gov)
# Created: 2022-11-30
---
version: "3.9"

services:
  # Build latest Haxall release on Ubunto:latest
  haxall:
    build:
      context: ./
      dockerfile: Dockerfile
    volumes:   # /host/path:/container/path
      - "./demo:/haxall/bin/demo"
    ports:
      - "8080:8080"
    expose:
      - "8080"
    stdin_open: true
    tty: true
    # environment:
      # EXAMPLE_VAR: "yes"
    # command: bash -c 'cd /haxall/bin && fan hx run demo'

  # NGINX container configuration
  # Serves exposed ports on previous containers via HTTP/TCP:80
  # Serves HTML generated by hxPy calls to python libraries
  # nginx:
  #  build:
  #    context: ./
  #    dockerfile: nginx.dockerfile
  #  volumes:
  #    - ./docker/nginx.conf:/etc/nginx/nginx.conf:ro
  #    - ./web:/usr/share/nginx/html
  #  ports:
  #    - "80:80"
  #    # - "443:443"
  #  links:
  #    - "haxall"
